assistant:
  name: Jarvis
  version: 1.4.1
  language: de
boot_sequence:
  enabled: true
  delay_seconds: 5
  messages:
  - Alle Systeme online, Sir.
  - Systeme hochgefahren, Sir. Alles bereit.
  - Online, Sir. Soll ich den Status durchgehen?
pushback:
  enabled: true
  confirmation_timeout: 120
  escalation_enabled: true
  resignation_ttl_seconds: 1800
  checks:
    open_windows: true
    empty_room: true
    daylight: true
    storm_warning: true
    unnecessary_heating: true
das_uebliche:
  enabled: true
  auto_execute_confidence: 0.8
  suggest_confidence: 0.6
return_briefing:
  enabled: true
  max_events: 20
  ttl_hours: 24
  event_types:
    doorbell: true
    person_arrived: true
    person_left: true
    washer_done: true
    weather_warning: true
    low_battery: true
    maintenance_due: true
    conditional_executed: true
mcu_intelligence:
  proactive_thinking: true
  engineering_diagnosis: true
  cross_references: true
  anomaly_detection: true
  implicit_commands: true
conversation_callbacks:
  enabled: true
  personality_style: beilaeufig
learning_acknowledgment:
  enabled: true
  max_per_session: 1
prediction_personality:
  enabled: true
  show_confidence: false
weather_personality:
  enabled: true
  intensity: normal
self_awareness:
  enabled: true
  meta_humor: true
proactive_personality:
  enabled: true
  sarcasm_in_notifications: true
character_lock:
  enabled: true
  closing_anchor: true
  structural_filter: true
  character_retry: true
  retry_threshold: 3
empathy:
  enabled: true
  intensity: normal
  mood_acknowledgment: true
  practical_offers: true
  good_mood_mirror: true
mood_complexity:
  enabled: true
  matrix:
    good:
      simple: 2
      medium: 3
      complex: 5
    neutral:
      simple: 2
      medium: 3
      complex: 4
    stressed:
      simple: 1
      medium: 2
      complex: 3
    frustrated:
      simple: 1
      medium: 2
      complex: 3
    tired:
      simple: 1
      medium: 2
      complex: 3
wellness:
  enabled: true
  check_interval_minutes: 60
  pc_break_reminder_minutes: 120
  stress_check: true
  meal_reminders: true
  meal_times:
    lunch: 13
    dinner: 19
  late_night_nudge: true
ambient_presence:
  enabled: false
  interval_minutes: 60
  quiet_start: 22
  quiet_end: 7
  report_weather: true
  report_energy: true
  all_quiet_probability: 0.2
foresight:
  enabled: true
  calendar_lookahead_minutes: 60
  weather_alerts: true
  departure_warning_minutes: 45
calendar:
  # Kalender-Entities explizit angeben (optional).
  # Wenn leer, werden alle calendar.* Entities aus HA abgefragt.
  entities: []
  # Beispiel: entities: ['calendar.persoenlich', 'calendar.familie']
household:
  primary_user: ''
  members: []
persons:
  titles: null
autonomy:
  level: 2
ollama:
  num_ctx: 4096
models:
  fast: qwen3:4b
  smart: qwen3:14b
  deep: qwen3:14b
  enabled:
    fast: true
    smart: true
    deep: true
  fast_keywords:
  - temperatur
  - heizung
  - rollladen
  - jalousie
  - szene
  - alarm
  - tuer
  - gute nacht
  - guten morgen
  - musik
  - pause
  - stopp
  - stop
  - leiser
  - lauter
  - an
  - aus
  deep_keywords:
  - erklaer
  - erklaere
  - warum genau
  - im detail
  - analysiere
  - analyse
  - vergleich
  - vergleiche
  - unterschied zwischen
  - vor- und nachteile
  - strategie
  - plan
  - plane
  - planung
  - optimier
  - optimiere
  - optimierung
  - was waere wenn
  - hypothetisch
  - stell dir vor
  - angenommen
  - zusammenfassung
  - zusammenfassen
  - fasse zusammen
  - berechne
  - berechnung
  - wie funktioniert
  - wie genau
  - schreib mir
  - schreibe mir
  - formuliere
  - rezept
  - anleitung
  - tutorial
  - pro und contra
  - bewerte
  - bewertung
  cooking_keywords:
  - kochen
  - backen
  - rezept
  - zubereiten
  - braten
  - grillen
  deep_min_words: 15
  options:
    temperature: 0.7
    max_tokens: 256
personality:
  style: butler
  sarcasm_level: 3
  opinion_intensity: 2
  self_irony_enabled: true
  self_irony_max_per_day: 3
  character_evolution: true
  formality_start: 80
  formality_min: 30
  formality_decay_per_day: 0.5
  time_layers:
    early_morning:
      style: ruhig, minimal, kein Humor. Kurzes Briefing wenn gefragt.
      max_sentences: 1
    morning:
      style: sachlich, effizient. Gelegentlich trocken. Produktiv-Modus.
      max_sentences: 2
    afternoon:
      style: normal, souveraen. Trockener Humor erlaubt.
      max_sentences: 2
    evening:
      style: entspannter, mehr Humor. Darf spitze Bemerkungen machen.
      max_sentences: 3
    night:
      style: ruhig und knapp. Kein Humor. Wenn der User schreibt, ganz normal antworten — er ist offensichtlich wach. Proaktive Meldungen nur bei Notfaellen.
      max_sentences: 2
proactive:
  enabled: true
  cooldown_seconds: 900
  music_follow_cooldown_minutes: 10
  min_autonomy_level: 2
  silence_scenes:
  - filmabend
  - kino
  - schlafen
  - meditation
  batching:
    enabled: true
    interval_minutes: 30
    max_items: 10
memory:
  extraction_enabled: true
  extraction_min_words: 5
  extraction_model: qwen3:4b
  extraction_temperature: 0.1
  extraction_max_tokens: 512
  max_person_facts_in_context: 5
  max_relevant_facts_in_context: 3
  min_confidence_for_context: 0.6
  duplicate_threshold: 0.15
  episode_min_words: 3
  default_confidence: 0.7
planner:
  max_iterations: 5
  model: qwen3:14b
  max_tokens: 512
  complex_keywords:
  - alles
  - fertig machen
  - vorbereiten
  - gehe weg
  - fahre weg
  - verreise
  - urlaub
  - routine
  - morgenroutine
  - abendroutine
  - wenn ich
  - falls ich
  - bevor ich
  - zuerst
  - danach
  - und dann
  - ausserdem
  - komplett
  - ueberall
  - in allen
  - party
  - besuch kommt
  - gaeste
mood:
  rapid_command_seconds: 5
  stress_decay_seconds: 300
  frustration_threshold: 3
  tired_hour_start: 23
  tired_hour_end: 5
  rapid_command_stress_boost: 0.15
  positive_stress_reduction: 0.1
  negative_stress_boost: 0.1
  impatient_stress_boost: 0.2
  tired_boost: 0.3
  repetition_stress_boost: 0.15
  positive_keywords:
  - danke
  - super
  - toll
  - perfekt
  - gut
  - prima
  - klasse
  - wunderbar
  - genau
  - richtig
  negative_keywords:
  - schlecht
  - falsch
  - nein
  - nicht
  - fehler
  - mist
  - nervig
  - geht nicht
  - kaputt
  - problem
  impatient_keywords:
  - schnell
  - sofort
  - jetzt
  - beeil
  - hurry
  - komm
  - mach schon
  - endlich
  - wann
  - noch nicht
  tired_keywords:
  - muede
  - erschoepft
  - kaputt
  - fertig
  - schlafen
  - bett
  - gaehn
  - nacht
activity:
  entities:
    media_players:
    - media_player.wohnzimmer
    - media_player.fernseher
    - media_player.tv
    mic_sensors:
    - binary_sensor.mic_active
    - binary_sensor.microphone
    bed_sensors:
    - binary_sensor.bed_occupancy
    - binary_sensor.bett
    pc_sensors:
    - binary_sensor.pc_active
    - binary_sensor.computer
    - switch.pc
  thresholds:
    night_start: 22
    night_end: 7
    guest_person_count: 2
    focus_min_minutes: 30
feedback:
  auto_timeout_seconds: 120
  base_cooldown_seconds: 300
  score_suppress: 0.15
  score_reduce: 0.3
  score_normal: 0.5
  score_boost: 0.7
summarizer:
  run_hour: 3
  run_minute: 0
  model: qwen3:14b
  max_tokens_daily: 512
  max_tokens_weekly: 384
  max_tokens_monthly: 512
context:
  max_context_tokens: 12000
  recent_conversations: 5
  api_timeout: 10
  llm_timeout: 60
lighting:
  enabled: true
  auto_on_dusk: true
  auto_off_away: true
  auto_off_empty_room_minutes: 30
  night_dimming: true
  daylight_off: true
  default_transition: 2
  circadian:
    enabled: false
    mode: mindhome
    transition_seconds: 3
    brightness_curve:
      - {time: "05:00", pct: 10}
      - {time: "06:00", pct: 40}
      - {time: "07:00", pct: 70}
      - {time: "08:00", pct: 90}
      - {time: "09:00", pct: 100}
      - {time: "12:00", pct: 100}
      - {time: "16:00", pct: 100}
      - {time: "18:00", pct: 80}
      - {time: "19:00", pct: 60}
      - {time: "20:00", pct: 40}
      - {time: "21:00", pct: 25}
      - {time: "22:00", pct: 10}
      - {time: "23:00", pct: 5}
    ct_curve:
      - {time: "05:00", kelvin: 2200}
      - {time: "07:00", kelvin: 3500}
      - {time: "09:00", kelvin: 5000}
      - {time: "12:00", kelvin: 5500}
      - {time: "16:00", kelvin: 5000}
      - {time: "18:00", kelvin: 3500}
      - {time: "20:00", kelvin: 2700}
      - {time: "22:00", kelvin: 2200}
heating:
  mode: room_thermostat
  curve_entity: ''
  curve_offset_min: -5
  curve_offset_max: 5
  night_offset: -2
  away_offset: -3
security:
  api_key_required: false
  require_confirmation:
  - lock_door:unlock
  - set_alarm:disarm
  - set_climate:off
  climate_limits:
    min: 15
    max: 28
  api_key: ''
  known_device_patterns:
  - ps5
  - watch
  - amazon
  - re500
  - h100
routines:
  morning_briefing:
    enabled: true
    trigger: first_motion_after_night
    modules:
    - greeting
    - weather
    - calendar
    - energy
    - house_status
    weekday_style: kurz
    weekend_style: ausfuehrlich
    morning_actions:
      covers_up: true
      lights_soft: false
    wakeup_sequence:
      enabled: true
      min_autonomy_level: 3
      bedroom_motion_sensor: ''  # z.B. binary_sensor.motion_schlafzimmer
      window_start_hour: 5
      window_end_hour: 9
      steps:
        covers_gradual:
          enabled: true
          room: schlafzimmer
          duration_seconds: 180
          step_interval_seconds: 30
        lights_soft:
          enabled: true
          room: schlafzimmer
          brightness: 20
          color_temp: warm
          transition: 10
        coffee_machine:
          enabled: false
          entity: switch.kaffeemaschine
      briefing_delay_seconds: 45
  good_night:
    enabled: true
    triggers:
    - gute nacht
    - ich gehe schlafen
    - schlaf gut
    - ab ins bett
    - gehe ins bett
    - feierabend
    checks:
    - windows
    - doors
    - alarm
    - lights
    - appliances
    actions:
      lights_off: true
      heating_night: true
      covers_down: true
      alarm_arm_home: true
  guest_mode:
    triggers:
    - ich habe besuch
    - ich hab besuch
    - gaeste kommen
    - besuch kommt
    - wir haben gaeste
    restrictions:
      hide_personal_info: true
      formal_tone: true
      restrict_security: true
      suggest_guest_wifi: true
time_awareness:
  enabled: true
  check_interval_minutes: 5
  thresholds:
    oven: 60
    iron: 30
    light_empty_room: 30
    window_open_cold: 120
    pc_no_break: 360
  counters:
    coffee_machine: true
# Oeffnungs-Sensoren (Fenster, Tueren, Tore) — Typ und Raum-Zuordnung.
# Typ: window = Fenster (Kippen/Offen), door = Tuer, gate = Tor/Garagentor
# heated: true = in beheiztem Raum (relevant fuer Heizungswarnungen)
# heated: false = unbeheizt (Garage, Garten, Schuppen — KEINE Heizungswarnung)
# Sensor ohne Eintrag hier → wird automatisch als window/heated behandelt (Fallback)
opening_sensors:
  entities: {}
  # Beispiel:
  # entities:
  #   binary_sensor.fenster_wohnzimmer:
  #     type: window
  #     room: wohnzimmer
  #     heated: true
  #   binary_sensor.gartentor:
  #     type: gate
  #     room: null
  #     heated: false
  #   binary_sensor.haustuer:
  #     type: door
  #     room: flur_unten
  #     heated: true
anticipation:
  enabled: true
  history_days: 30
  min_confidence: 0.6
  check_interval_minutes: 15
  thresholds:
    ask: 0.6
    suggest: 0.8
    auto: 0.95
insights:
  enabled: true
  check_interval_minutes: 30
  cooldown_hours: 4
  checks:
    weather_windows: true
    frost_heating: true
    calendar_travel: true
    energy_anomaly: true
    away_devices: true
    temp_drop: true
    window_temp_drop: true
    calendar_weather_cross: true
    comfort_contradiction: true
  thresholds:
    frost_temp_c: 2
    energy_anomaly_percent: 30
    away_device_minutes: 120
    temp_drop_degrees_per_2h: 3
intent_tracking:
  enabled: true
  check_interval_minutes: 60
  remind_hours_before: 12
conversation_continuity:
  enabled: true
  resume_after_minutes: 10
  expire_hours: 24
seasonal_actions:
  enabled: true
  check_interval_minutes: 15
  auto_execute_level: 3
  cover_automation:
    sun_tracking: true               # Sonnenstand-basiert (Azimut + Elevation)
    temperature_based: true          # Temperatur-basiert (Hitze/Kaelte)
    weather_protection: true         # Wetter/Sturm-Schutz
    presence_simulation: true        # Urlaubs-Simulation wenn vacation_mode
    night_insulation: true           # Nachts runter fuer Isolierung
    heat_protection_temp: 26         # Ab dieser Aussentemp Sonnenschutz
    frost_protection_temp: 3         # Bei Frost Rolllaeden schliessen
    storm_wind_speed: 50             # km/h — Rolllaeden HOCH zum Schutz
    vacation_mode_entity: ""         # z.B. input_boolean.vacation_mode  HINWEIS: Urlaubs-Simulation ist erst aktiv wenn hier eine Entity eingetragen wird!
    inverted_position: false         # true wenn ALLE Covers invertierte Positionen haben (0=offen, 100=zu). Pro Cover in room_profiles.yaml oder cover_configs.json konfigurierbar.
tts:
  entity: tts.piper
  ssml_enabled: true
  speed:
    confirmation: 105
    warning: 85
    briefing: 95
    greeting: 100
    question: 100
    casual: 100
  pauses:
    before_important: 300
    between_sentences: 200
    after_greeting: 400
  whisper_triggers:
  - psst
  - leise
  - fluester
  - whisper
  whisper_cancel_triggers:
  - normal
  - laut
  - normale lautstaerke
volume:
  day: 0.8
  evening: 0.5
  night: 0.3
  sleeping: 0.2
  emergency: 1.0
  whisper: 0.15
  evening_start: 22
  night_start: 0
  morning_start: 7
sounds:
  enabled: true
  events:
    listening: listening_chime
    confirmed: confirm_ping
    warning: warning_tone
    alarm: alarm_urgent
    doorbell: doorbell_soft
    greeting: greeting_chime
    error: error_tone
    goodnight: goodnight_tone
  night_volume_factor: 0.4
  alexa_speakers: []
    # - media_player.echo_wohnzimmer
    # - media_player.echo_kueche
narration:
  enabled: true
  default_transition: 3
  scene_transitions:
    filmabend: 5
    gute_nacht: 7
    aufwachen: 10
    gemuetlich: 4
  step_delay: 1.5
  narrate_actions: true
voice_analysis:
  enabled: true
  wpm_fast: 180
  wpm_slow: 80
  wpm_normal: 130
  use_whisper_metadata: true
  voice_weight: 0.3
speaker_recognition:
  enabled: true
  min_confidence: 0.6
  fallback_ask: true
  max_profiles: 10
  # Device-zu-Person Mapping: HA Device-ID → person_id
  # Die Device-IDs findet man in HA unter Settings → Devices → ESPHome
  # Format: "esphome_<name>": "<person_id>"
  # Raeume ohne klaren Hauptnutzer leer lassen ("") → Room+Presence greift
  device_mapping: {}
  # ReSpeaker Hauptraeume (ausfuellen wenn Hardware da):
  # device_mapping:
  #   esphome_respeaker_kueche: "max"
  #   esphome_respeaker_wohnzimmer: ""
  #   esphome_respeaker_schlafzimmer: ""
  #   esphome_respeaker_buero: "max"
  #   esphome_atom_echo_flur: ""
  #   esphome_atom_echo_bad: ""
  # Direction of Arrival (DoA): Winkel-zu-Person Mapping pro Geraet
  # Erfordert ReSpeaker XVF3800 mit ESPHome DoA-Sensor
  # Format: device_id → {winkelbereich_start-ende: person_id}
  # Winkel in Grad (0-360, 0=vorne, 90=rechts, 180=hinten, 270=links)
  # doa_mapping:
  #   esphome_respeaker_kueche:
  #     "0-90": "max"       # Sitzplatz rechts
  #     "270-360": "lisa"   # Sitzplatz links
  doa_mapping: {}
  doa_tolerance: 30  # Toleranz in Grad (+/- um den Zielwinkel)
multi_room:
  enabled: true
  presence_timeout_minutes: 15
  auto_follow: false  # Musik folgt automatisch in neuen Raum (ab Autonomie-Level 4)
  # Speaker pro Raum — fuer TTS-Routing und Musik-Follow
  room_speakers:
    # wohnzimmer: media_player.wohnzimmer_echo
    # schlafzimmer: media_player.schlafzimmer_echo
    # kueche: media_player.kueche_echo
    # buero: media_player.buero_echo
    null
  # Praesenzmelder pro Raum — fuer automatische Raumerkennung
  room_motion_sensors:
    # wohnzimmer: binary_sensor.motion_wohnzimmer
    # schlafzimmer: binary_sensor.occupancy_schlafzimmer
    # kueche: binary_sensor.motion_kueche
    # buero: binary_sensor.motion_buero
    null
person_profiles:
  enabled: true
  profiles: null
  # Per-Person Persoenlichkeitsanpassung. Format:
  # profiles:
  #   max:
  #     humor: 3              # 1-5 (1=ernst, 5=sarkastisch)
  #     empathy: normal       # subtil | normal | ausfuehrlich | deaktiviert
  #     response_style: normal  # kurz | normal | ausfuehrlich
  #     formality_start: 80   # 20-100 (Override fuer diese Person)
  #   anna:
  #     humor: 2
  #     empathy: ausfuehrlich
  #     response_style: ausfuehrlich
trust_levels:
  default: 0
  persons: null
  guest_allowed_actions:
  - set_light
  - set_climate
  - play_media
  - get_entity_state
  - play_sound
  - get_house_status
  - get_room_climate
  security_actions:
  - lock_door
  - set_alarm
  - set_presence_mode
  room_restrictions: null
    # schlafzimmer:
    #   allowed_persons: [Max, Lisa]
    #   min_trust_level: 2
diagnostics:
  enabled: true
  check_interval_minutes: 30
  battery_warning_threshold: 20
  stale_sensor_minutes: 120
  offline_threshold_minutes: 30
  alert_cooldown_minutes: 60
cooking:
  enabled: true
  language: de
  default_portions: 2
  max_steps: 12
  max_tokens: 1024
  timer_notify_tts: true
knowledge_base:
  enabled: true
  auto_ingest: true
  chunk_size: 500
  chunk_overlap: 50
  max_distance: 1.2
  search_limit: 3
  embedding_model: paraphrase-multilingual-MiniLM-L12-v2
  supported_extensions:
  - .txt
  - .md
  - .yaml
  - .yml
  - .csv
  - .log
recipe_store:
  enabled: true
  auto_ingest: true
  chunk_size: 800
  chunk_overlap: 100
  max_distance: 1.0
  search_limit: 5
  min_relevance: 0.4
  embedding_model: paraphrase-multilingual-MiniLM-L12-v2
response_filter:
  enabled: true
  banned_phrases:
  - Natürlich!
  - Natuerlich!
  - Gerne!
  - Selbstverständlich!
  - Selbstverstaendlich!
  - Klar!
  - Gern geschehen!
  - Kann ich sonst noch etwas für dich tun?
  - Kann ich sonst noch etwas fuer dich tun?
  - Kann ich dir sonst noch helfen?
  - Wenn du noch etwas brauchst
  - Sag einfach Bescheid
  - Ich bin froh, dass
  - Es freut mich
  - Es ist mir eine Freude
  - Als KI
  - Als künstliche Intelligenz
  - Als kuenstliche Intelligenz
  - Ich bin nur ein Programm
  - Lass mich mal schauen
  - Lass mich kurz schauen
  - Das klingt frustrierend
  - Ich verstehe, wie du dich fühlst
  - Ich verstehe, wie du dich fuehlst
  - Das klingt wirklich
  banned_starters:
  - Also,
  - 'Also '
  - Grundsätzlich
  - Grundsaetzlich
  - Im Prinzip
  - Nun,
  - 'Nun '
  - Sozusagen
  - Quasi
  - Eigentlich
  - Im Grunde genommen
  - Tatsächlich,
  - Tatsaechlich,
  max_response_sentences: 0
correction:
  confidence: 0.95
  model: qwen3:4b
  temperature: 0.1
dashboard:
  setup_complete: false
tutorial:
  enabled: true
  max_interactions: 10
health_monitor:
  enabled: true
  check_interval_minutes: 30
  co2_warn: 1000
  co2_critical: 1500
  humidity_low: 30
  humidity_high: 70
  temp_low: 16
  temp_high: 27
  hydration_interval_hours: 2
  hydration_start_hour: 8
  hydration_end_hour: 22
  alert_cooldown_minutes: 180
humidor:
  enabled: false
  sensor_entity: ''
  target_humidity: 70
  warn_below: 62
  warn_above: 75
device_health:
  enabled: true
  check_interval_minutes: 60
  baseline_history_days: 30
  stddev_multiplier: 2.0
  min_samples: 10
  stale_sensor_days: 3
  hvac_timeout_minutes: 120
  hvac_temp_tolerance: 1.0
  alert_cooldown_minutes: 1440
  track_domains:
  - sensor
  - climate
  - binary_sensor
  exclude_patterns:
  - weather.
  - sun.
  - automation.
  - update.
  energy_sensor_keywords:
  - energy
  - power
  - verbrauch
  - strom
ocr:
  enabled: true
  languages: deu+eng
  vision_model: ''
  max_image_size_mb: 20
  description_max_tokens: 512
ambient_audio:
  enabled: true
  min_confidence: 0.6
  poll_interval_seconds: 5
  sensor_mappings: null
  cooldowns:
    default_seconds: 30
    per_event:
      smoke_alarm: 60
      glass_break: 120
      dog_bark: 10
      baby_cry: 15
      doorbell: 5
  disabled_events: null
  night_mode:
    start_hour: 22
    end_hour: 7
    escalate_severity: true
  reaction_overrides: null
conflict_resolution:
  enabled: true
  conflict_window_seconds: 300
  max_commands_per_person: 20
  use_trust_priority: true
  mediation:
    enabled: true
    model: qwen3:14b
    max_tokens: 256
    temperature: 0.7
  conflict_domains:
    climate:
      threshold: 3
      strategy: average
    light:
      threshold: 50
      strategy: trust_priority
    media:
      strategy: mediate
    cover:
      threshold: 40
      strategy: trust_priority
  resolution_cooldown_seconds: 120
maintenance:
  enabled: true
  config_file: config/maintenance.yaml
self_optimization:
  enabled: true
  analysis_interval: weekly
  approval_mode: manual
  max_proposals_per_cycle: 3
  model: qwen3:14b
  rollback:
    enabled: true
    max_snapshots: 20
    snapshot_on_every_edit: true
  parameter_bounds:
    sarcasm_level:
      min: 1
      max: 5
    opinion_intensity:
      min: 0
      max: 3
    max_response_sentences:
      min: 1
      max: 5
    formality_min:
      min: 10
      max: 80
    formality_start:
      min: 30
      max: 100
    insight_cooldown_hours:
      min: 2
      max: 8
    anticipation_min_confidence:
      min: 0.5
      max: 0.8
    feedback_base_cooldown:
      min: 120
      max: 600
    spontaneous_max_per_day:
      min: 0
      max: 5
  immutable_keys:
  - trust_levels
  - security
  - autonomy
  - models
  - dashboard
  - response_filter.banned_phrases
  - response_filter.banned_starters
self_automation:
  enabled: true
  max_per_day: 5
  model: qwen3:14b
  templates_file: config/automation_templates.yaml
# --- Kamera-Integration ---
cameras:
  enabled: true
  vision_model: llava
  camera_map: null
    # haustuer: camera.haustuer
    # garage: camera.garage
# --- Energie-Optimierung ---
energy:
  enabled: true
  entities:
    electricity_price: ''
    total_consumption: ''
    solar_production: ''
    grid_export: ''
  thresholds:
    price_low_cent: 15
    price_high_cent: 35
    solar_high_watts: 2000
    anomaly_increase_percent: 30
# --- Geo-Fence / Proximity ---
geo_fence:
  approaching_km: 2.0
  arriving_km: 0.5
# --- Notfall-Protokolle ---
# Werden bei CRITICAL Events automatisch ausgefuehrt.
# target: "all" = alle Entities der Domain, oder entity_id fuer einzelne.
emergency_protocols:
  fire:
    actions:
      - {domain: light, service: turn_on, target: all}
      - {domain: cover, service: open_cover, target: all}
      - {domain: notify, service: notify, data: {message: "FEUERALARM! Rauch erkannt — alle Lichter an, Rolllaeden offen."}}
  intrusion:
    actions:
      - {domain: light, service: turn_on, target: all}
      - {domain: notify, service: notify, data: {message: "EINBRUCH-ALARM! Bewegung erkannt — alle Lichter eingeschaltet."}}
  water_leak:
    actions:
      - {domain: light, service: turn_on, target: all}
      - {domain: notify, service: notify, data: {message: "WASSERLECK erkannt! Bitte sofort pruefen."}}
# --- Interrupt-Queue ---
# CRITICAL-Meldungen unterbrechen sofort laufende Aktionen (TTS, Streaming).
interrupt_queue:
  enabled: true
  pause_ms: 300
# --- Situations-Modell ---
# Trackt Veraenderungen im Haus zwischen Gespraechen.
# JARVIS erwaehnt beilaeufig was sich seit dem letzten Gespraech geaendert hat.
situation_model:
  enabled: true
  min_pause_minutes: 5
  max_changes: 5
  temp_threshold: 2
# --- Lern-Beobachter ---
learning:
  enabled: true
  min_repetitions: 3
  time_window_minutes: 30
  weekly_report:
    enabled: true
    day: 6  # Sonntag (0=Montag)
    hour: 19
# --- Jarvis-Features: Progressive Antworten ---
progressive_responses:
  enabled: true
  show_context_step: true
  show_thinking_step: true
  show_action_step: true
# --- Jarvis-Features: Benannte Protokolle ---
protocols:
  enabled: true
  max_protocols: 20
  max_steps: 10
# --- Jarvis-Features: Geraete-Persoenlichkeit ---
device_narration:
  enabled: true
  custom_nicknames: {}
    # waschmaschine: "Frau Waschkraft"
# --- Jarvis-Features: Spontane Beobachtungen ---
spontaneous:
  enabled: true
  max_per_day: 2
  min_interval_hours: 3
  active_hours:
    start: 8
    end: 22
  checks:
    energy_comparison: true
    streak: true
    usage_record: true
    device_milestone: true
    house_efficiency: true
# --- Jarvis-Features: Emotionales Gedaechtnis ---
emotional_memory:
  enabled: true
  negative_threshold: 2
  decay_days: 90
# --- Benachrichtigungen ---
notifications:
  channels: null
    # tts:
    #   preferred: true
    #   quiet_hours: [23, 7]
    #   urgency_min: low
    # push:
    #   preferred: false
    #   urgency_min: medium
# --- Urlaubs-Simulation ---
vacation_simulation:
  morning_hour: 7
  evening_hour: 18
  night_hour: 23
  variation_minutes: 30
# --- Wetter-Warnungen ---
weather_warnings:
  enabled: true
  temp_high: 35
  temp_low: -5
  wind_speed_high: 60
  warn_conditions:
  - lightning
  - lightning-rainy
  - hail
  - exceptional
# --- Web-Suche ---
web_search:
  enabled: false
  engine: searxng
  searxng_url: http://localhost:8888
  max_results: 5
  timeout_seconds: 10
# --- Besucher-Management (Feature 12) ---
visitor_management:
  enabled: true
  auto_guest_mode: false
  ring_cooldown_seconds: 30
  history_max: 100
# --- Smart DJ (Feature 11) ---
music_dj:
  enabled: true
  proactive_enabled: false
  proactive_interval_minutes: 60
  cooldown_minutes: 30
  default_volume: 40
  suppress_during:
  - sleeping
  - in_call
  custom_queries: {}
# --- Saugroboter-Steuerung (Phase 11) ---
vacuum:
  enabled: true
  robots:
    eg:
      entity_id: ""               # z.B. vacuum.dreame_eg — bitte eintragen
      name: "Saugroboter EG"
      nickname: "der Kleine unten"
      floor: "eg"
      rooms: {}                   # room_name: segment_id (Dreame Raum-IDs)
      # Beispiel:
      # rooms:
      #   flur_unten: 1
      #   buero_julia: 2
      #   buero_manuel: 3
    og:
      entity_id: ""               # z.B. vacuum.dreame_og — bitte eintragen
      name: "Saugroboter OG"
      nickname: "der Kleine oben"
      floor: "og"
      rooms: {}
      # Beispiel:
      # rooms:
      #   wohnzimmer: 1
      #   kueche: 2
      #   schlafzimmer: 3
      #   kinderzimmer_strasse: 4
      #   kinderzimmer_garten: 5
      #   badezimmer: 6
      #   flur_oben: 7
  auto_clean:
    enabled: true
    when_nobody_home: true         # Starten wenn alle weg sind
    not_during:                    # Nicht starten waehrend:
      - "meeting"                  # Kalender-Event enthaelt "meeting"
      - "schlafen"                 # Schlafmodus aktiv
    min_hours_between: 24          # Mindestabstand zwischen Reinigungen
    preferred_time_start: 10       # Bevorzugt 10-16 Uhr
    preferred_time_end: 16
  maintenance:
    enabled: true
    check_interval_hours: 24
    warn_at_percent: 10            # Warnung wenn Verschleissteil < 10%
# --- Self-Improvement: Geschlossene Feedback-Loops ---
# Wirkungstracker: Beobachtet ob Aktionen rueckgaengig gemacht werden
outcome_tracker:
  enabled: true
  observation_delay_seconds: 180
  max_results: 500
# Korrektur-Gedaechtnis: Speichert User-Korrekturen strukturiert
correction_memory:
  enabled: true
  max_entries: 200
  max_context_entries: 3
# Woechentlicher Selbst-Report ueber alle Lernsysteme
self_report:
  enabled: true
  model: qwen3:14b
# Lernende Schwellwerte: Passt Parameter automatisch an (enge Grenzen)
adaptive_thresholds:
  enabled: false          # Default OFF bis genug Daten gesammelt
  analysis_interval_hours: 168
  auto_adjust: true
# Response Quality: Misst Antwort-Effektivitaet
response_quality:
  enabled: true
  followup_window_seconds: 60
  rephrase_similarity_threshold: 0.6
# Error Pattern Analysis: Erkennt wiederkehrende Fehlermuster
error_patterns:
  enabled: true
  min_occurrences_for_mitigation: 3
  mitigation_ttl_hours: 1
